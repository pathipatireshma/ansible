- name: Setup Mysql Repo
  ansible.builtin.copy:
    src: mysql.repo
    desc: /etc/yum.repos.d/mysql.repo

- name: Install mysql server
  ansible.builtin.yum:
    name:
     - mysql-community-server
     - MySQL-python
    state: Installed

- name: Start mysql service
  ansible.builtin.systemd:
    name: mysqld
    state: started
    enabled: true

- name: Check if new password is working
  mysql_info:
    login_user: root
    login_password: RoboShop1
    filter: databases
  ignore_errors: yes
  register: check_pass

- name: Print1
  debug:
    msg: "{{check_pass}}"

- name: Find
  ansible.builtin.shell: grep 'temporary password' /var/log/mysqld.log | awk '{print $NF}'
  register: mysql_output

- name: Print
  debug:
    msg: "{{mysql_output}}"
